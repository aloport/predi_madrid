_________
Bienvenid@ a PREDI, la herramienta electoral basada en mercados de predicción que ofrece *predicciones diarias para las elecciones autonómicas de la C. Madrid 2021*.

A continuación, los resultados actualizados [19 de marzo de 2021].
 
-------------------

- __[Predicción sobre el gobierno resultante](https://aloport.github.io/predi_madrid/gobierno.html)__

```{r holio1, echo = FALSE, fig.align='center'}
highchart() %>%
  hc_add_series(
    data = government_tree,
    type = "sunburst",
    name = "Probabilidad",
    # type=  "treemap",
    allowDrillToNode = TRUE,
    colors= c("transparent", "#0F86DF", "#FF6251", "#DDDF00"),
    tooltip = list(
      headerFormat = "<b>{point.key}</b><br>",
      pointFormat = "{point.value}% probabilidad"
    ),
    levels = list(
      list(
        level = 1,
        borderWidth = 0,
        borderColor = "transparent",
         colorByPoint = TRUE,
        dataLabels = list(enabled = TRUE)
      ),
      list(
        level = 2,
        borderWidth = 0,
        borderColor = "transparent",
        colorByPoint = TRUE,
        dataLabels = list(enabled = TRUE)
      ),
      list(
        level = 3,
        borderWidth = 0,
        borderColor = "transparent",
        colorVariation = list(key = "brightness", to = 0.50),
        dataLabels = list(enabled = TRUE)
      )
    )
  )


```

- __[Estimación de voto a partidos](https://aloport.github.io/predi_madrid/voto.html)__

```{r holio2, echo = FALSE, fig.align='center'}

hchart(
  vote_donut, "pie", hcaes(name = party, y = vote, color= colors),
  name = "Escaños",
  innerSize = "60%",
  startAngle = -90, endAngle = 90,
  dataLabels = list(format = "{point.name}, {point.vote} <br> ({point.seats})")
) %>% 
  # con la siguiente opción desactivamos los 'dataLabels' para que no 
  # exista infomración redundante
  hc_plotOptions(
    series = list(dataLabels = list(enabled = FALSE))
  ) %>% 
  hc_tooltip(
    useHTML = TRUE,
    style = list(fontSize = "20px"),
    headerFormat = "",
    pointFormat = "<div style='text-align: center;'> <b>{point.name}</b><br>{point.seats} escaños<br>{point.vote}% votos</div>",
    positioner = JS(
      "function () {
      
        /* one of the most important parts! */
        xp =  this.chart.chartWidth/2 - this.label.width/2
        yp =  this.chart.chartHeight/2 - this.label.height/1
      
        return { x: xp, y: yp };
      
      }"),
    shadow = FALSE,
    borderWidth = 0,
    backgroundColor = "transparent",
    hideDelay = 1000
  )

```


[Metodología](https://aloport.github.io/predi_madrid/projects.html) • [Sobre nuestro proyecto de investigación](https://aloport.github.io/predi_madrid/about.html) • [¿Quieres participar en el mercado de predicción?](https://aloport.github.io/predi_madrid/participate.html)

_____

Contacto: Alberto López Ortega _alberto.lopezortega@uzh.ch_ , [bertous](https://twitter.com/bertous)